#!/bin/bash

### FLASH SYSTEM PARTITION ONLY ### 
### FOR SERVICE UPDATE ###

# mount image repo 
function mount_home()
{
    REPO=/dev/sdb4
    TO=/mnt/usb
    mkdir -p $TO && \
    mount $REPO $TO && \
    log "Mounting $REPO to $TO ..."
}

# clone & compress - system partition
function flash_sda2()
{
    FROM=/mnt/usb/nprohd_sda2.img.gz
    TO=/dev/sda2
    log "Flashing $FROM to $TO ..."
    partclone.ext4 -N -c -s $FROM | gzip -c -6 > $TO && \
    log "Flashing $FROM to $TO succesful."
}

# clone & compress - whole
function flash_sda()
{
    FROM=/mnt/usb/nprohd_sda.img.gz
    TO=/dev/sda
    log "Flashing $FROM to $TO ..."
    partclone.ext4 -N -c -s $FROM | gzip -c -6 > $TO && \
    log "Flashing $FROM to $TO succesful."
}